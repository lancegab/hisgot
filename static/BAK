var ol = $('ol');


function addMessage(message) {
	ol.append('<li>' + message + '</li>');
}

function sendMessage(message) {

	var xhr = new XMLHttpRequest();

	xhr.open('POST', '/send');
	xhr.send(message);
}

function fetchMessages() {
  var xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		if (xhr.readyState === xhr.DONE) {
			/*var messages = JSON.parse(xhr.responseText);
			ol.empty();
			messages.forEach(addMessage);*/
		}
	};
	xhr.open('GET', '/forum');
	xhr.send();
}

setInterval(fetchMessages, 1);

$.get("/forum", function(messages) {
    messages.forEach(addMessage);
})

var xhr = new XMLHttpRequest();

xhr.onreadystatechange = function() {

	if (xhr.readyState === xhr.DONE) {
        console.log(xhr.responseText);
	}
};

xhr.open('GET', '/');

xhr.send();
